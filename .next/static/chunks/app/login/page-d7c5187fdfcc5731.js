(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9845:function(e,n,o){Promise.resolve().then(o.bind(o,4338))},4338:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return u}});var t=o(7437),i=o(1936),a=o(6520),r=o(6255),s=o(7907),l=o(2265);function u(){let e=(0,r.iK)();if(!e)return null;let{user:n,setUser:o,calendarToken:u,setCalendarToken:c}=e,d=(0,s.useRouter)(),[g,f]=(0,l.useState)(""),[k,h]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(n&&u&&d.push("/dashboard"),n&&!u){f("");let e=setTimeout(()=>{f("Gagal mendapatkan akses kalender. Silakan coba login ulang atau cek koneksi Google OAuth Anda.")},1e4);return()=>clearTimeout(e)}},[n,u,d]),(0,l.useEffect)(()=>{!function e(){window.google&&window.google.accounts?h(!0):setTimeout(e,300)}()},[]);let p=async()=>{var e,n;console.log("[Login] Mulai login Firebase...");let t=new i.hJ;if(o((await (0,i.rh)(a.I,t)).user),null===(n=window.google)||void 0===n?void 0:null===(e=n.accounts)||void 0===e?void 0:e.oauth2){console.log("[Login] GIS tersedia, mulai request access token...");try{window.google.accounts.oauth2.initTokenClient({client_id:"656328403825-6ntm1l1mjnqn589rnqj77m1svf6sq3oq.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/userinfo.email",callback:e=>{console.log("[Login] Callback GIS response:",e),e.access_token?(c(e.access_token),console.log("[Login] Access token diterima dan disimpan.")):(console.error("[Login] Tidak ada access_token di response GIS.",e),alert("Gagal mendapatkan access token dari Google Identity Services. Silakan cek konfigurasi client_id dan izin OAuth di Google Cloud Console."))}}).requestAccessToken(),console.log("[Login] requestAccessToken dipanggil.")}catch(e){console.error("[Login] Error saat inisialisasi GIS:",e),alert("Terjadi error saat inisialisasi Google Identity Services. Silakan cek console dan konfigurasi client_id.")}}else console.error("[Login] GIS belum siap di window."),alert("Google Identity Services belum siap, coba reload halaman.")};return(0,t.jsxs)("div",{style:{textAlign:"center",marginTop:"5em"},children:[(0,t.jsx)("h2",{children:"Login & Sinkron Kalender"}),(0,t.jsx)("button",{onClick:p,style:{background:"#6366f1",color:"#fff",border:"none",borderRadius:"8px",padding:"1em 2em",fontWeight:600,cursor:"pointer",fontSize:"1.1em"},disabled:!k,children:"Login Google"}),n&&!u&&(0,t.jsx)("p",{children:"Menunggu otorisasi kalender..."}),n&&u&&(0,t.jsx)("p",{children:"Login lengkap! Kalender sudah tersinkron."}),g&&(0,t.jsx)("p",{style:{color:"#ef4444",marginTop:"1em"},children:g})]})}},7907:function(e,n,o){"use strict";var t=o(5313);o.o(t,"useRouter")&&o.d(n,{useRouter:function(){return t.useRouter}})},6255:function(e,n,o){"use strict";o.d(n,{T5:function(){return r},iK:function(){return s}});var t=o(7437),i=o(2265);let a=(0,i.createContext)(void 0);function r(e){let{children:n}=e,[o,r]=(0,i.useState)(null),[s,l]=(0,i.useState)(null);return(0,t.jsx)(a.Provider,{value:{user:o,setUser:r,calendarToken:s,setCalendarToken:l},children:n})}let s=()=>{let e=(0,i.useContext)(a);if(!e)throw Error("useAuthCalendar must be used within an AuthCalendarProvider");return e}},6520:function(e,n,o){"use strict";o.d(n,{I:function(){return s}});var t=o(6142),i=o(1936),a=o(8121);let r=(0,t.C6)().length?(0,t.Mq)():(0,t.ZF)({apiKey:"AIzaSyAuMm9_M1MFh3MYZZtgXe-TLwgM9JrxCZo",authDomain:"tugas-akhir-4d34f.firebaseapp.com",projectId:"tugas-akhir-4d34f",storageBucket:"tugas-akhir-4d34f.appspot.com",messagingSenderId:"462715724181",appId:"1:462715724181:web:31ce2ce385699105c3969c",measurementId:"G-WJVJ2GVZWM"}),s=(0,i.v0)(r);(0,a.ad)(r)}},function(e){e.O(0,[609,15,828,971,69,744],function(){return e(e.s=9845)}),_N_E=e.O()}]);