(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{9573:function(e,t,a){Promise.resolve().then(a.bind(a,9585))},9585:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var n=a(7437),r=a(2265),i=a(2824),o=a(2857),d=a(8582),l=a(6255),s=a(7907);function m(){let[e,t]=(0,r.useState)([]),[a,m]=(0,r.useState)(!1),[c,u]=(0,r.useState)({summary:"",startDate:new Date().toISOString().slice(0,10),startTime:new Date().toTimeString().slice(0,5),endDate:new Date(Date.now()+36e5).toISOString().slice(0,10),endTime:new Date(Date.now()+36e5).toTimeString().slice(0,5)}),[g,f]=(0,r.useState)("Asia/Jakarta"),[p,h]=(0,r.useState)(null),[x,b]=(0,r.useState)(0),[y,v]=(0,r.useState)("dark"),k=(0,r.useRef)(null),w=(0,l.iK)(),T=null==w?void 0:w.user,S=null==w?void 0:w.calendarToken,[j,D]=(0,r.useState)(null),R=(0,s.useRouter)();function A(e){if(!e||isNaN(e.getTime()))return"";let t=e=>e.toString().padStart(2,"0"),a=e.getFullYear(),n=t(e.getMonth()+1),r=t(e.getDate()),i=t(e.getHours()),o=t(e.getMinutes()),d=t(e.getSeconds());return"".concat(a,"-").concat(n,"-").concat(r,"T").concat(i,":").concat(o,":").concat(d)}function C(e){if(!e)return"";let t=new Date(e);if(isNaN(t.getTime()))return e;let a=e=>e.toString().padStart(2,"0");return"".concat(t.getFullYear(),"-").concat(a(t.getMonth()+1),"-").concat(a(t.getDate())," ").concat(a(t.getHours()),":").concat(a(t.getMinutes()))}async function _(){if(S)try{let e=await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:"Bearer ".concat(S)}});if(e.ok){let t=await e.json();D(t.email||null)}else D(null)}catch(e){D(null)}}async function B(){if(S){m(!0);try{let e=new Date,a=encodeURIComponent(e.toISOString()),n=await fetch("https://www.googleapis.com/calendar/v3/calendars/primary/events?orderBy=startTime&singleEvents=true&timeMin=".concat(a,"&maxResults=100"),{headers:{Authorization:"Bearer ".concat(S)}});if(401===n.status){alert("Token expired, silakan login ulang."),t([]),D(null),m(!1);return}let r=await n.json();t(r.items||[])}catch(e){alert("Gagal mengambil event kalender")}m(!1)}}function z(e,t){return new Date(e+"T"+t)}function O(e,t){return!(!e||!t||isNaN(e.getTime())||isNaN(t.getTime()))&&e<t}async function W(e){if(e.preventDefault(),!S)return;let t=z(c.startDate,c.startTime),a=z(c.endDate,c.endTime);if(!O(t,a)){alert("Waktu mulai/selesai tidak valid atau format salah.");return}m(!0);try{let e=A(t),r=A(a),i=await fetch("https://www.googleapis.com/calendar/v3/calendars/primary/events",{method:"POST",headers:{Authorization:"Bearer ".concat(S),"Content-Type":"application/json"},body:JSON.stringify({summary:c.summary,description:"__FROM_APP__",start:{dateTime:e,timeZone:g},end:{dateTime:r,timeZone:g}})});if(i.ok)u({summary:"",startDate:new Date().toISOString().slice(0,10),startTime:new Date().toTimeString().slice(0,5),endDate:new Date(Date.now()+36e5).toISOString().slice(0,10),endTime:new Date(Date.now()+36e5).toTimeString().slice(0,5)}),B(),b(e=>e+1);else{var n;let e=await i.json();alert("Gagal menambah event: "+((null===(n=e.error)||void 0===n?void 0:n.message)||""))}}finally{m(!1)}}async function I(e){if(S){m(!0);try{await fetch("https://www.googleapis.com/calendar/v3/calendars/primary/events/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(S)}}),await B(),b(e=>e+1)}finally{m(!1)}}}async function E(e){if(e.preventDefault(),!S||!p)return;let t=z(c.startDate,c.startTime),a=z(c.endDate,c.endTime);if(!O(t,a)){alert("Waktu mulai/selesai tidak valid atau format salah.");return}m(!0);try{let e=A(t),r=A(a),i=await fetch("https://www.googleapis.com/calendar/v3/calendars/primary/events/".concat(p),{method:"PATCH",headers:{Authorization:"Bearer ".concat(S),"Content-Type":"application/json"},body:JSON.stringify({summary:c.summary,description:"__FROM_APP__",start:{dateTime:e,timeZone:g},end:{dateTime:r,timeZone:g}})});if(i.ok)u({summary:"",startDate:new Date().toISOString().slice(0,10),startTime:new Date().toTimeString().slice(0,5),endDate:new Date(Date.now()+36e5).toISOString().slice(0,10),endTime:new Date(Date.now()+36e5).toTimeString().slice(0,5)}),h(null),B(),b(e=>e+1);else{var n;let e=await i.json();alert("Gagal edit event: "+((null===(n=e.error)||void 0===n?void 0:n.message)||""))}}finally{m(!1)}}(0,r.useEffect)(()=>{v("light"===document.body.getAttribute("data-theme")?"light":"dark")},[]),(0,r.useEffect)(()=>(S?(_(),B(),k.current=setInterval(()=>{B(),b(e=>e+1)},3e5)):(k.current&&clearInterval(k.current),t([]),D(null)),()=>{k.current&&clearInterval(k.current)}),[S]);let M=e.filter(e=>"string"==typeof e.description&&e.description.replace(/\s+/g,"").includes("__FROM_APP__"));if((0,r.useEffect)(()=>{T||R.push("/login")},[T,R]),!T)return(0,n.jsx)("div",{children:"Loading..."});let F=Array.from({length:24},(e,t)=>t.toString().padStart(2,"0")),N=Array.from({length:60},(e,t)=>t.toString().padStart(2,"0"));return(0,n.jsxs)("div",{style:{background:"dark"===y?"linear-gradient(120deg,#18181b 60%,#23272f 100%)":"linear-gradient(120deg,#eef2ff 60%,#f5f7fb 100%)"},children:[(0,n.jsx)("style",{children:"\n    @media (max-width: 600px) {\n      body { padding: 0 !important; }\n      main {\n        padding: 0.7rem !important;\n        max-width: 100vw !important;\n        margin-top: 0.5rem !important;\n        border-radius: 0 !important;\n        min-height: 90vh !important;\n      }\n      header {\n        padding: 0.7rem 1rem !important;\n        font-size: 1em !important;\n      }\n      .nav-link, .theme-toggle-btn {\n        font-size: 1em !important;\n        padding: 0.2em 0.5em !important;\n      }\n      h1 { font-size: 1.3em !important; }\n      h2 { font-size: 1.1em !important; }\n      [data-section-style], [data-card-style] {\n        padding: 1em 0.5em !important;\n        max-width: 100vw !important;\n        border-radius: 10px !important;\n      }\n      .main-menu-cards {\n        flex-direction: column !important;\n        gap: 1em !important;\n        min-width: 0 !important;\n        max-width: 100vw !important;\n      }\n      .main-menu-cards a {\n        min-width: 0 !important;\n        max-width: 100vw !important;\n        font-size: 1em !important;\n        padding: 1em 0.5em !important;\n      }\n      .checklist-section, .progress-section, .jadwal-section {\n        padding: 1em 0.5em !important;\n        max-width: 100vw !important;\n      }\n    }\n  "}),(0,n.jsx)(i._C,{dateAdapter:o.H,adapterLocale:d.id,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{style:{fontSize:"1.5rem",marginBottom:"1em",color:"#7c3aed",background:"dark"===y?"linear-gradient(90deg,#c7d2fe,#7c3aed)":"linear-gradient(90deg,#7c3aed,#a5b4fc)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Kalender & Timeline"}),S?(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:(0,n.jsx)("a",{href:"https://calendar.google.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#0070f3",textDecoration:"underline",fontWeight:500},children:"Buka Google Kalender"})}),(0,n.jsx)("div",{style:{marginBottom:"1em"},children:(0,n.jsxs)("label",{style:{fontWeight:500,color:"dark"===y?"#f3f4f6":"#222",display:"inline-block"},children:["Zona Waktu:",(0,n.jsxs)("select",{value:g,onChange:e=>f(e.target.value),style:{marginLeft:"8px",padding:"0.4em",borderRadius:"6px",border:"1px solid #6366f1",background:"dark"===y?"#353a47":"#fff",color:"dark"===y?"#f3f4f6":"#222"},children:[(0,n.jsx)("option",{value:"Asia/Jakarta",children:"WIB (GMT+7)"}),(0,n.jsx)("option",{value:"Asia/Makassar",children:"WITA (GMT+8)"}),(0,n.jsx)("option",{value:"Asia/Jayapura",children:"WIT (GMT+9)"})]})]})}),(0,n.jsx)("button",{onClick:B,disabled:a,style:{background:"linear-gradient(90deg,#6366f1,#60a5fa)",color:"#fff",border:"none",borderRadius:"10px",padding:"0.9em 1.5em",fontWeight:600,marginBottom:"1em",cursor:"pointer",display:"block",width:"100%",maxWidth:"320px",marginLeft:"auto",marginRight:"auto",boxShadow:"0 2px 8px rgba(99,102,241,0.08)",fontSize:"1.05em",transition:"background 0.2s"},children:a?"Mengambil event...":"Ambil Event Kalender"}),S&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("form",{onSubmit:null===p?W:E,style:{margin:"2em 0",padding:"1.5em",background:"dark"===y?"#23272f":"#fff",borderRadius:"18px",boxShadow:"dark"===y?"0 8px 32px rgba(99,102,241,0.18)":"0 8px 32px rgba(99,102,241,0.10)",maxWidth:"420px",marginLeft:"auto",marginRight:"auto",color:"dark"===y?"#f3f4f6":"#222",border:"dark"===y?"1.5px solid #353a47":"none"},children:[(0,n.jsx)("h3",{style:{marginBottom:"0.7em",color:"dark"===y?"#f3f4f6":"#222"},children:null===p?"Tambah Event":"Edit Event"}),(0,n.jsx)("div",{style:{marginBottom:"1em"},children:(0,n.jsxs)("label",{style:{color:"dark"===y?"#f3f4f6":"#222",fontWeight:500,display:"block",marginBottom:"0.5em"},children:["Judul Event:",(0,n.jsx)("input",{type:"text",value:c.summary,onChange:e=>u({...c,summary:e.target.value}),required:!0,style:{marginTop:"8px",padding:"0.5em",borderRadius:"6px",border:"1px solid #6366f1",width:"100%",boxSizing:"border-box",color:"#222",background:"#fff",fontSize:"1em"}})]})}),(0,n.jsx)("div",{style:{marginBottom:"1em"},children:(0,n.jsxs)("label",{style:{color:"dark"===y?"#f3f4f6":"#222",fontWeight:500,display:"block",marginBottom:"0.5em"},children:["Mulai:",(0,n.jsxs)("div",{style:{display:"flex",gap:"0.7em"},children:[(0,n.jsx)("input",{type:"date",value:c.startDate,onChange:e=>u({...c,startDate:e.target.value}),required:!0,style:{padding:"0.5em",borderRadius:"6px",border:"1px solid #6366f1",fontSize:"1em",fontFamily:"inherit"}}),(0,n.jsx)("select",{value:c.startTime.split(":")[0],onChange:e=>u({...c,startTime:e.target.value+":"+c.startTime.split(":")[1]}),style:{padding:"0.5em",borderRadius:"6px",border:"1px solid #6366f1",fontSize:"1em",fontFamily:"inherit"},children:F.map(e=>(0,n.jsx)("option",{value:e,children:e},e))}),(0,n.jsx)("select",{value:c.startTime.split(":")[1],onChange:e=>u({...c,startTime:c.startTime.split(":")[0]+":"+e.target.value}),style:{padding:"0.5em",borderRadius:"6px",border:"1px solid #6366f1",fontSize:"1em",fontFamily:"inherit"},children:N.map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]})]})}),(0,n.jsx)("div",{style:{marginBottom:"1em"},children:(0,n.jsxs)("label",{style:{color:"dark"===y?"#f3f4f6":"#222",fontWeight:500,display:"block",marginBottom:"0.5em"},children:["Selesai:",(0,n.jsxs)("div",{style:{display:"flex",gap:"0.7em"},children:[(0,n.jsx)("input",{type:"date",value:c.endDate,onChange:e=>u({...c,endDate:e.target.value}),required:!0,style:{padding:"0.5em",borderRadius:"6px",border:"1px solid #6366f1",fontSize:"1em",fontFamily:"inherit"}}),(0,n.jsx)("select",{value:c.endTime.split(":")[0],onChange:e=>u({...c,endTime:e.target.value+":"+c.endTime.split(":")[1]}),style:{padding:"0.5em",borderRadius:"6px",border:"1px solid #6366f1",fontSize:"1em",fontFamily:"inherit"},children:F.map(e=>(0,n.jsx)("option",{value:e,children:e},e))}),(0,n.jsx)("select",{value:c.endTime.split(":")[1],onChange:e=>u({...c,endTime:c.endTime.split(":")[0]+":"+e.target.value}),style:{padding:"0.5em",borderRadius:"6px",border:"1px solid #6366f1",fontSize:"1em",fontFamily:"inherit"},children:N.map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]})]})}),(0,n.jsx)("button",{type:"submit",disabled:a,style:{background:"#6366f1",color:"#fff",border:"none",borderRadius:"8px",padding:"0.7em 1.2em",fontWeight:500,cursor:"pointer",marginRight:"8px",marginTop:"0.5em"},children:null===p?"Tambah":"Simpan"}),null!==p&&(0,n.jsx)("button",{type:"button",onClick:function(){h(null),u({summary:"",startDate:new Date().toISOString().slice(0,10),startTime:new Date().toTimeString().slice(0,5),endDate:new Date(Date.now()+36e5).toISOString().slice(0,10),endTime:new Date(Date.now()+36e5).toTimeString().slice(0,5)})},style:{background:"#e0e7ff",color:"#6366f1",border:"1px solid #6366f1",borderRadius:"8px",padding:"0.7em 1.2em",fontWeight:500,cursor:"pointer",marginTop:"0.5em"},children:"Batal"})]}),(0,n.jsxs)("div",{style:{margin:"2em 0",maxWidth:420,marginLeft:"auto",marginRight:"auto"},children:[(0,n.jsx)("h3",{style:{marginBottom:10,color:"dark"===y?"#f3f4f6":"#222"},children:"Daftar Jadwal Tugas Akhir:"}),0===M.length?(0,n.jsx)("div",{style:{background:"dark"===y?"#23272f":"#fff",color:"dark"===y?"#a1a1aa":"#888",padding:"1.2em",borderRadius:"18px",textAlign:"center",boxShadow:"dark"===y?"0 4px 16px rgba(99,102,241,0.18)":"0 4px 16px rgba(99,102,241,0.10)",marginTop:10},children:"Tidak ada jadwal tugas akhir"}):(0,n.jsx)("ul",{style:{listStyle:"none",padding:0},children:M.map(e=>{var t,a,r,i;return(0,n.jsxs)("li",{style:{background:"dark"===y?"#23272f":"#fff",borderRadius:"18px",marginBottom:"1.2em",padding:"1.2em",boxShadow:"dark"===y?"0 4px 16px rgba(99,102,241,0.18)":"0 4px 16px rgba(99,102,241,0.10)",color:"dark"===y?"#f3f4f6":"#222",border:"1px solid "+("dark"===y?"#353a47":"#e0e7ff"),transition:"box-shadow 0.2s, background 0.2s, transform 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="dark"===y?"#353a47":"#e0e7ff",e.currentTarget.style.boxShadow="0 8px 32px rgba(99,102,241,0.18)",e.currentTarget.style.transform="scale(1.03)"},onMouseOut:e=>{e.currentTarget.style.background="dark"===y?"#23272f":"#fff",e.currentTarget.style.boxShadow="dark"===y?"0 4px 16px rgba(99,102,241,0.18)":"0 4px 16px rgba(99,102,241,0.10)",e.currentTarget.style.transform="none"},children:[(0,n.jsx)("div",{children:(0,n.jsx)("span",{style:{fontWeight:"bold"},children:e.summary})}),(0,n.jsxs)("div",{style:{color:"dark"===y?"#a1a1aa":"#555",fontSize:"0.98em"},children:[(null===(t=e.start)||void 0===t?void 0:t.dateTime)?C(e.start.dateTime):null===(a=e.start)||void 0===a?void 0:a.date," - ",(null===(r=e.end)||void 0===r?void 0:r.dateTime)?C(e.end.dateTime):null===(i=e.end)||void 0===i?void 0:i.date]}),(0,n.jsxs)("div",{style:{marginTop:"0.8em",display:"flex",gap:"0.5em"},children:[(0,n.jsx)("button",{onClick:()=>(function(e){var t,a;let n=(null===(t=e.start)||void 0===t?void 0:t.dateTime)?new Date(e.start.dateTime):new Date,r=new Date((null===(a=e.end)||void 0===a?void 0:a.dateTime)?e.end.dateTime:Date.now()+36e5);u({summary:e.summary||"",startDate:n.toISOString().slice(0,10),startTime:n.toTimeString().slice(0,5),endDate:r.toISOString().slice(0,10),endTime:r.toTimeString().slice(0,5)}),h(e.id)})(e),style:{background:"#6366f1",color:"#fff",border:"none",borderRadius:"6px",padding:"0.4em 1em",fontWeight:500,cursor:"pointer"},children:"Edit"}),(0,n.jsx)("button",{onClick:()=>I(e.id),style:{background:"#ef4444",color:"#fff",border:"none",borderRadius:"6px",padding:"0.4em 1em",fontWeight:500,cursor:"pointer"},children:"Hapus"})]})]},e.id)})})]}),(0,n.jsx)("iframe",{src:j?"https://calendar.google.com/calendar/embed?src=".concat(encodeURIComponent(j),"&rand=").concat(x):"https://calendar.google.com/calendar/embed?src=YOUR_EMAIL%40gmail.com",style:{border:"2px solid "+("dark"===y?"#353a47":"#e0e7ff"),background:"dark"===y?"#23272f":"#fff",width:"100%",height:"600px",borderRadius:"14px",boxShadow:"0 2px 8px rgba(99,102,241,0.06)",filter:"dark"===y?"brightness(0.92)":"none"},frameBorder:0},x),(0,n.jsx)("p",{style:{fontSize:"0.9em",color:"#888",marginTop:"1em",textAlign:"center"},children:j?(0,n.jsxs)(n.Fragment,{children:["Ini adalah kalender kamu (",(0,n.jsx)("b",{children:j}),")."]}):(0,n.jsxs)(n.Fragment,{children:["Ganti ",(0,n.jsx)("b",{children:"YOUR_EMAIL%40gmail.com"})," dengan email Google kamu (pakai %40 untuk @)."]})})]})]}):(0,n.jsx)("div",{style:{marginBottom:"2em"},children:(0,n.jsx)("p",{style:{fontSize:"0.95em",color:"dark"===y?"#6366f1":"#222",marginTop:"1em",textAlign:"center",fontWeight:500},children:"Login akun dan kalender Google di halaman login."})})]})})]})}},6255:function(e,t,a){"use strict";a.d(t,{T5:function(){return o},iK:function(){return d}});var n=a(7437),r=a(2265);let i=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,r.useState)(null),[d,l]=(0,r.useState)(null);return(0,n.jsx)(i.Provider,{value:{user:a,setUser:o,calendarToken:d,setCalendarToken:l},children:t})}let d=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useAuthCalendar must be used within an AuthCalendarProvider");return e}}},function(e){e.O(0,[597,971,69,744],function(){return e(e.s=9573)}),_N_E=e.O()}]);