(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{2468:function(e,t,n){Promise.resolve().then(n.bind(n,8818))},8818:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n(7437),o=n(2265),r=n(7181),i=n(5142),d=n(2493),s=n(2772),l=n(8121),c=n(8628),g=n(7907);function u(){let[e,t]=(0,o.useState)([]),[n,u]=(0,o.useState)(!1),[m,p]=(0,o.useState)({tanggal:"",nama:"",isi:""}),[b,f]=(0,o.useState)(null),[x,h]=(0,o.useState)(null),[k,y]=(0,o.useState)(""),[S,w]=(0,o.useState)("desc"),[j,v]=(0,o.useState)(""),[C,z]=(0,o.useState)(""),[T,W]=(0,o.useState)([]),[R,F]=(0,o.useState)("dark"),{user:B,loading:I}=(0,c.a)(),D=(0,g.useRouter)(),P=(0,r.jE)({extensions:[i.Z],content:m.isi,immediatelyRender:!1,onUpdate:e=>{let{editor:t}=e;p(e=>({...e,isi:t.getHTML()}))}});(0,o.useEffect)(()=>{P&&P.commands.setContent(m.isi||"")},[n,b]),(0,o.useEffect)(()=>{F("light"===(document.body.getAttribute("data-theme")||localStorage.getItem("theme")||"dark")?"light":"dark")},[]);let M=(0,l.ad)(s.Z);(0,o.useEffect)(()=>{!async function(){t((await (0,l.PL)((0,l.hJ)(M,"catatan"))).docs.map(e=>({id:e.id,...e.data()})))}()},[]);let E="#7c3aed",Z="#c7d2fe",_="#a5b4fc",L="#f59e42",J="#ef4444",A="#34d399",H="dark"===R?"rgba(36, 41, 54, 0.82)":"rgba(255,255,255,0.96)",U="dark"===R?"#f3f4f6":"#22223b",N="dark"===R?_:E,O="dark"===R?"rgba(36,41,54,0.92)":"#fff",G="dark"===R?_:E,V="dark"===R?"0 6px 20px rgba(124,58,237,0.12)":"0 6px 20px rgba(124,58,237,0.07)",Y="dark"===R?"1.5px solid rgba(124,58,237,0.28)":"1.5px solid #7c3aed",q="dark"===R?"0 8px 32px rgba(124,58,237,0.22)":"0 8px 32px rgba(124,58,237,0.09)",K=e.filter(e=>{var t;let n=(null!==(t=e.nama)&&void 0!==t?t:"").toLowerCase().includes(k.toLowerCase())||e.isi.replace(/<[^>]+>/g,"").toLowerCase().includes(k.toLowerCase()),a=j||"0000-00-00",o=C||"9999-12-31",r=e.tanggal>=a&&e.tanggal<=o;return n&&r}).sort((e,t)=>"desc"===S?e.tanggal<t.tanggal?1:-1:e.tanggal>t.tanggal?1:-1);function X(e){if(0===e.length)return;let t=new d.ZP;t.setFont("helvetica"),t.setFontSize(16),t.text("Daftar Catatan Asistensi",20,20);let n=35;e.forEach((e,a)=>{let o=K[e];t.setFontSize(13),t.text("Catatan #".concat(a+1),20,n),n+=7,t.setFontSize(12),t.text("Tanggal: ".concat(o.tanggal).concat(o.nama?" | Nama: "+o.nama:""),20,n),n+=8,t.text("Isi:",20,n),n+=7;let r=o.isi.replace(/<[^>]+>/g,"");t.splitTextToSize(r,170).forEach(e=>{t.text(e,24,n),(n+=7)>270&&(t.addPage(),n=20)}),(n+=10)>270&&(t.addPage(),n=20)}),t.save(1===e.length?"catatan_".concat(K[e[0]].tanggal,".pdf"):"catatan_asistensi_".concat(new Date().toISOString().slice(0,10),".pdf"))}return((0,o.useEffect)(()=>{I||B||D.push("/login")},[B,I,D]),I||!B)?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{style:{minHeight:"100vh",background:"dark"===R?"linear-gradient(120deg,#18181b 60%,#23272f 100%)":"linear-gradient(120deg,#eef2ff 60%,#f5f7fb 100%)",fontFamily:"Inter, Segoe UI, sans-serif",paddingBottom:"4rem",transition:"background 0.5s"},children:[(0,a.jsx)("style",{children:"\n    @media (max-width: 600px) {\n      body {\n        padding: 0 !important;\n      }\n      main {\n        padding: 0.7rem !important;\n        max-width: 100vw !important;\n        margin-top: 0.5rem !important;\n        border-radius: 0 !important;\n        min-height: 90vh !important;\n      }\n      header {\n        padding: 0.7rem 1rem !important;\n        font-size: 1em !important;\n      }\n      .nav-link, .theme-toggle-btn {\n        font-size: 1em !important;\n        padding: 0.2em 0.5em !important;\n      }\n      h1 {\n        font-size: 1.3em !important;\n      }\n      h2 {\n        font-size: 1.1em !important;\n      }\n      [data-section-style], [data-card-style] {\n        padding: 1em 0.5em !important;\n        max-width: 100vw !important;\n        border-radius: 10px !important;\n      }\n      .main-menu-cards {\n        flex-direction: column !important;\n        gap: 1em !important;\n        min-width: 0 !important;\n        max-width: 100vw !important;\n      }\n      .main-menu-cards a {\n        min-width: 0 !important;\n        max-width: 100vw !important;\n        font-size: 1em !important;\n        padding: 1em 0.5em !important;\n      }\n      .checklist-section, .progress-section, .jadwal-section {\n        padding: 1em 0.5em !important;\n        max-width: 100vw !important;\n      }\n    }\n  "}),(0,a.jsxs)("div",{style:{maxWidth:820,margin:"2.5rem auto",padding:"0 1rem",backdropFilter:"blur(2px)"},children:[(0,a.jsx)("h1",{style:{fontSize:"2rem",marginBottom:"1.2em",color:E,background:"dark"===R?"linear-gradient(90deg,#c7d2fe,#7c3aed)":"linear-gradient(90deg,#7c3aed,#a5b4fc)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:800},children:"Catatan Asistensi (TipTap)"}),(0,a.jsxs)("div",{style:{display:"flex",gap:18,alignItems:"center",marginBottom:26,flexWrap:"wrap",background:"dark"===R?"rgba(36,41,54,0.82)":"rgba(255,255,255,0.96)",borderRadius:16,boxShadow:V,padding:"1.1em 1.2em"},children:[(0,a.jsx)("input",{type:"text",value:k,onChange:e=>y(e.target.value),placeholder:"Cari nama/isi catatan...",style:{padding:"0.78em 1em",borderRadius:10,border:"1.6px solid ".concat(G),fontSize:"1.07em",width:245,background:O,color:U,boxShadow:V,outline:"none",transition:"border 0.2s"},onFocus:e=>e.currentTarget.style.border="2px solid ".concat(E),onBlur:e=>e.currentTarget.style.border="1.6px solid ".concat(G)}),(0,a.jsx)("input",{type:"date",value:j,onChange:e=>v(e.target.value),style:{padding:"0.78em",borderRadius:10,border:"1.6px solid ".concat(G),fontSize:"1.07em",width:145,background:O,color:U,boxShadow:V,outline:"none",transition:"border 0.2s"},onFocus:e=>e.currentTarget.style.border="2px solid ".concat(E),onBlur:e=>e.currentTarget.style.border="1.6px solid ".concat(G)}),(0,a.jsx)("span",{style:{color:"dark"===R?_:E,fontWeight:500},children:"s/d"}),(0,a.jsx)("input",{type:"date",value:C,onChange:e=>z(e.target.value),style:{padding:"0.78em",borderRadius:10,border:"1.6px solid ".concat(G),fontSize:"1.07em",width:145,background:O,color:U,boxShadow:V,outline:"none",transition:"border 0.2s"},onFocus:e=>e.currentTarget.style.border="2px solid ".concat(E),onBlur:e=>e.currentTarget.style.border="1.6px solid ".concat(G)}),(0,a.jsxs)("button",{onClick:()=>w("desc"===S?"asc":"desc"),style:{background:"linear-gradient(80deg,".concat(E,",").concat(L,")"),color:"#fff",border:"none",borderRadius:10,padding:"0.78em 1.2em",fontWeight:600,cursor:"pointer",boxShadow:V,transition:"background 0.2s"},children:["Urutkan: ","desc"===S?"Terbaru":"Terlama"]}),(0,a.jsx)("button",{onClick:()=>{u(!n),f(null),p({tanggal:"",nama:"",isi:""}),P&&P.commands.setContent("")},style:{background:"linear-gradient(100deg,".concat(E,",").concat(L,",").concat(A,")"),color:"#fff",border:"none",borderRadius:14,padding:"0.78em 1.5em",fontWeight:700,cursor:"pointer",boxShadow:V,fontSize:"1.13em",transition:"background 0.2s"},children:n?"Tutup Form":"+ Catatan Baru"})]}),(0,a.jsxs)("div",{style:{margin:"12px 0 24px 0",padding:"1em 1.2em",background:"dark"===R?"rgba(124,58,237,0.08)":"rgba(124,58,237,0.07)",borderRadius:14,border:Y,boxShadow:V,display:"flex",gap:14,alignItems:"center",color:E,fontWeight:500},children:[(0,a.jsx)("span",{style:{fontWeight:600,color:N},children:"Pilih catatan untuk export PDF:"}),(0,a.jsxs)("button",{onClick:()=>X(T),disabled:0===T.length,style:{background:0===T.length?Z:E,color:"#fff",border:"none",borderRadius:10,padding:"0.73em 1.2em",fontWeight:700,cursor:0===T.length?"not-allowed":"pointer",fontSize:"1em",boxShadow:V,transition:"background 0.2s"},children:[(0,a.jsx)("span",{role:"img","aria-label":"PDF",style:{marginRight:7},children:"\uD83D\uDCC4"}),"Export PDF ",T.length>1?"Terpilih":"Catatan"]}),(0,a.jsx)("button",{onClick:()=>W(K.map((e,t)=>t)),style:{background:"#fff",color:E,border:Y,borderRadius:10,padding:"0.73em 1em",fontWeight:700,cursor:"pointer",fontSize:"1em",boxShadow:V,transition:"background 0.2s"},children:"Pilih Semua"}),(0,a.jsx)("button",{onClick:()=>W([]),style:{background:"#fff",color:J,border:"1.5px solid ".concat(J),borderRadius:10,padding:"0.73em 1em",fontWeight:700,cursor:"pointer",fontSize:"1em",boxShadow:V,transition:"background 0.2s"},children:"Reset Pilihan"})]}),n&&(0,a.jsx)("div",{style:{background:"dark"===R?"rgba(36,41,54,0.96)":"rgba(255,255,255,0.98)",borderRadius:24,padding:"2.4rem 2rem 2.2rem 2rem",marginBottom:"2em",color:U,boxShadow:q,maxWidth:760,border:Y,margin:"0 auto",backdropFilter:"blur(10px)"},children:(0,a.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),m.tanggal&&m.isi.replace(/<[^>]+>/g,"").trim()){var n;null!==b&&(null===(n=K[b])||void 0===n?void 0:n.id)?((0,l.r7)((0,l.JU)(M,"catatan",K[b].id),{tanggal:m.tanggal,nama:m.nama,isi:m.isi}),t(e=>e.map((e,t)=>t===b?{...m,id:K[b].id}:e))):(0,l.ET)((0,l.hJ)(M,"catatan"),{tanggal:m.tanggal,nama:m.nama,isi:m.isi}).then(e=>{t(t=>[...t,{...m,id:e.id}])}),u(!1),f(null),p({tanggal:"",nama:"",isi:""}),P&&P.commands.setContent("")}},children:[(0,a.jsxs)("div",{style:{marginBottom:"1.3em",fontWeight:500},children:[(0,a.jsx)("label",{style:{color:N,fontSize:"1.13em",marginBottom:6},children:"Tanggal Catatan:"}),(0,a.jsx)("input",{type:"date",value:m.tanggal,onChange:e=>p({...m,tanggal:e.target.value}),required:!0,style:{width:"100%",marginTop:"7px",padding:"0.7em 1em",borderRadius:"10px",border:"1.7px solid ".concat(G),fontSize:"1.11em",background:O,color:U,boxShadow:V,outline:"none",transition:"border 0.2s"},onFocus:e=>e.currentTarget.style.border="2px solid ".concat(E),onBlur:e=>e.currentTarget.style.border="1.7px solid ".concat(G)})]}),(0,a.jsxs)("div",{style:{marginBottom:"1.3em",fontWeight:500},children:[(0,a.jsx)("label",{style:{color:N,fontSize:"1.13em",marginBottom:6},children:"Nama (opsional):"}),(0,a.jsx)("input",{type:"text",value:m.nama||"",onChange:e=>p({...m,nama:e.target.value}),style:{width:"100%",marginTop:"7px",padding:"0.7em 1em",borderRadius:"10px",border:"1.7px solid ".concat(G),fontSize:"1.11em",background:O,color:U,boxShadow:V,outline:"none",transition:"border 0.2s"},onFocus:e=>e.currentTarget.style.border="2px solid ".concat(E),onBlur:e=>e.currentTarget.style.border="1.7px solid ".concat(G)})]}),(0,a.jsxs)("div",{style:{marginBottom:"1.3em",fontWeight:500},children:[(0,a.jsx)("label",{style:{color:N,fontSize:"1.13em",marginBottom:6},children:"Catatan:"}),(0,a.jsx)(r.kg,{editor:P,style:{background:O,borderRadius:"18px",minHeight:"220px",marginTop:"10px",marginBottom:"1em",padding:"1.2em",fontSize:"1.11em",boxShadow:V,border:"1.7px solid ".concat(G),outline:"none",transition:"border 0.2s"}})]}),(0,a.jsx)("button",{type:"submit",style:{background:"linear-gradient(90deg,".concat(E,",").concat(A,")"),color:"#fff",border:"none",borderRadius:"10px",padding:"0.75em 1.3em",fontWeight:700,cursor:"pointer",fontSize:"1.09em",boxShadow:V,transition:"background 0.2s"},children:null!==b?"Update":"Simpan"}),null!==b&&(0,a.jsx)("button",{type:"button",onClick:()=>{u(!1),f(null),p({tanggal:"",nama:"",isi:""}),P&&P.commands.setContent("")},style:{marginLeft:"10px",background:"#fff",color:E,border:Y,borderRadius:"10px",padding:"0.75em 1.3em",fontWeight:700,cursor:"pointer",fontSize:"1.09em",boxShadow:V,transition:"background 0.2s"},children:"Batal"})]})}),(0,a.jsx)("ul",{style:{marginTop:"1.7rem",padding:0,listStyle:"none",display:"flex",flexDirection:"column",gap:"1.35em"},children:K.map((e,t)=>(0,a.jsxs)("li",{style:{background:H,borderRadius:"22px",padding:"1.3em 1.7em",boxShadow:q,fontWeight:500,fontSize:"1.10em",color:U,border:Y,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"box-shadow 0.16s, background 0.18s, transform 0.16s"},onClick:()=>h(t),onMouseOver:e=>{e.currentTarget.style.background="dark"===R?"rgba(124,58,237,0.20)":Z,e.currentTarget.style.color="dark"===R?"#fff":E,e.currentTarget.style.transform="scale(1.02)"},onMouseOut:e=>{e.currentTarget.style.background=H,e.currentTarget.style.color=U,e.currentTarget.style.transform="none"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,a.jsx)("input",{type:"checkbox",checked:T.includes(t),onChange:e=>{e.stopPropagation(),W(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},style:{width:18,height:18,accentColor:E},onClick:e=>e.stopPropagation(),title:"Pilih untuk export PDF"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{marginBottom:"6px"},children:[(0,a.jsx)("span",{style:{background:new Date(e.tanggal).toDateString()===new Date().toDateString()?L:E,color:"#fff",borderRadius:"10px",padding:"4px 14px",fontSize:"1em",marginRight:"10px",fontWeight:700,boxShadow:V,letterSpacing:"0.01em"},children:e.tanggal}),e.nama&&(0,a.jsx)("span",{style:{color:E,marginRight:"10px",fontWeight:700},children:e.nama})]}),(0,a.jsx)("div",{style:{opacity:.74,fontSize:"1em"},children:"string"==typeof e.isi?e.isi.replace(/<[^>]+>/g,"").slice(0,60)+(e.isi.replace(/<[^>]+>/g,"").length>60?"...":""):""})]})]}),(0,a.jsx)("span",{style:{fontSize:"0.99em",color:E,fontWeight:700,marginLeft:"1em",letterSpacing:"0.01em"},children:"Detail"})]},e.id||t))}),null!==x&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"dark"===R?"rgba(32,26,53,0.55)":"rgba(136,142,233,0.18)",zIndex:9999,backdropFilter:"blur(6px)"},onClick:()=>h(null),children:(0,a.jsxs)("div",{style:{position:"relative",maxWidth:660,margin:"3.5rem auto",background:"dark"===R?"rgba(36,41,54,0.96)":"rgba(255,255,255,0.97)",borderRadius:"24px",padding:"2.6rem",boxShadow:q,color:U,overflow:"hidden",border:"2px solid ".concat(E),backdropFilter:"blur(10px)"},onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("h3",{style:{marginBottom:"1em",color:E,fontWeight:800,fontSize:"1.36em"},children:[K[x].tanggal,K[x].nama?" - ".concat(K[x].nama):""]}),(0,a.jsx)("div",{style:{fontSize:"1.13em",color:U,marginBottom:"2.8em",maxHeight:"46vh",overflowY:"auto",background:"dark"===R?"rgba(36,41,54,0.90)":"#f8fafc",borderRadius:"14px",padding:"1.1em 1.3em",boxShadow:"dark"===R?"inset 0 2px 8px rgba(124,58,237,0.10)":"inset 0 2px 8px rgba(124,58,237,0.07)",border:"1.7px solid ".concat(_)},dangerouslySetInnerHTML:{__html:K[x].isi}}),(0,a.jsxs)("div",{style:{position:"sticky",bottom:"0",left:0,width:"100%",padding:"1em 0",display:"flex",gap:"1em",borderTop:"1.6px solid ".concat(E),justifyContent:"flex-end",zIndex:2,background:"dark"===R?"rgba(36,41,54,0.96)":"#fff"},children:[(0,a.jsx)("button",{onClick:()=>h(null),style:{background:E,color:"#fff",border:"none",borderRadius:"10px",padding:"0.7em 1.2em",fontWeight:700,cursor:"pointer",fontSize:"1.09em",boxShadow:V,transition:"background 0.2s"},children:"Tutup"}),(0,a.jsx)("button",{onClick:()=>{p(K[x]),u(!0),f(x),P&&P.commands.setContent(K[x].isi||"")},style:{background:A,color:"#fff",border:"none",borderRadius:"10px",padding:"0.7em 1.2em",fontWeight:700,cursor:"pointer",fontSize:"1.09em",boxShadow:V,transition:"background 0.2s"},children:"Edit"}),(0,a.jsx)("button",{onClick:()=>(function(e){if(confirm("Yakin ingin menghapus catatan ini?")){let n=K[e].id;n&&((0,l.oe)((0,l.JU)(M,"catatan",n)),t(e=>e.filter(e=>e.id!==n)))}h(null),W(T.filter(t=>t!==e))})(x),style:{background:J,color:"#fff",border:"none",borderRadius:"10px",padding:"0.7em 1.2em",fontWeight:700,cursor:"pointer",fontSize:"1.09em",boxShadow:V,transition:"background 0.2s"},children:"Hapus"}),(0,a.jsx)("button",{onClick:()=>X([x]),style:{background:L,color:"#fff",border:"none",borderRadius:"10px",padding:"0.7em 1.2em",fontWeight:700,cursor:"pointer",fontSize:"1.09em",boxShadow:V,transition:"background 0.2s"},children:"Download PDF"})]})]})})]})]})}},2772:function(e,t,n){"use strict";let a=(0,n(6142).ZF)({apiKey:"AIzaSyAuMm9_M1MFh3MYZZtgXe-TLwgM9JrxCZo",authDomain:"tugas-akhir-4d34f.firebaseapp.com",projectId:"tugas-akhir-4d34f",storageBucket:"tugas-akhir-4d34f.appspot.com",messagingSenderId:"462715724181",appId:"1:462715724181:web:31ce2ce385699105c3969c",measurementId:"G-WJVJ2GVZWM"});t.Z=a},8628:function(e,t,n){"use strict";n.d(t,{H:function(){return s},a:function(){return l}});var a=n(7437),o=n(2265),r=n(1936),i=n(6520);let d=(0,o.createContext)({user:null,loading:!0});function s(e){let{children:t}=e,[n,s]=(0,o.useState)(null),[l,c]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=(0,r.Aj)(i.I,e=>{s(e),c(!1)});return()=>e()},[]),(0,a.jsx)(d.Provider,{value:{user:n,loading:l},children:t})}function l(){return(0,o.useContext)(d)}},6520:function(e,t,n){"use strict";n.d(t,{I:function(){return d}});var a=n(6142),o=n(1936),r=n(8121);let i=(0,a.C6)().length?(0,a.Mq)():(0,a.ZF)({apiKey:"AIzaSyAuMm9_M1MFh3MYZZtgXe-TLwgM9JrxCZo",authDomain:"tugas-akhir-4d34f.firebaseapp.com",projectId:"tugas-akhir-4d34f",storageBucket:"tugas-akhir-4d34f.appspot.com",messagingSenderId:"462715724181",appId:"1:462715724181:web:31ce2ce385699105c3969c",measurementId:"G-WJVJ2GVZWM"}),d=(0,o.v0)(i);(0,r.ad)(i)}},function(e){e.O(0,[609,15,505,125,572,902,828,637,771,971,69,744],function(){return e(e.s=2468)}),_N_E=e.O()}]);